{% extends 'navbar.html' %}

{% load static %}

{% block contentHead %}
<link rel="stylesheet" href="{% static 'css/tabella.css' %}">
{% endblock %}

{% block content %}

<ul class="nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#piatti" type="button" role="tab" aria-controls="home" aria-selected="true">Piatti</button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#ingredientiPiatti" type="button" role="tab" aria-controls="profile" aria-selected="false">Ingredienti Piatti</button>
    </li>
  </ul>
  <br>
  <div class="tab-content" id="myTabContent">
    <!-- PIATTI -->
    <div class="tab-pane fade show active" id="piatti" role="tabpanel">
      <div class="row">
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div id="divNotifica"></div>
        </div>
      </div>
        <div class="row">
          {% if permessiAzioni %}
            <div class="col-sm-12 col-md-6 col-lg-4">
              <form hx-post="{% url 'nuovoPiatto' %}" hx-swap="outerHTML" class="formInserimento" hx-target="#divNotifica">
                <div x-data="{ inserimento: false }">
                  <div class="row">
                    <button type="button" class="btn btn-primary buttonAzione" @click="inserimento = true" x-show="!inserimento">Nuovo Piatto</button>
                  </div>
                  
                  <div x-show="inserimento">
                    <div class="row">
                      <button type="button" class="btn btn-primary buttonAzione" @click="inserimento = false">Annulla Inserimento</button>
                      <button type="submit" class="btn btn-success buttonAzione" @click="inserimento = false">Conferma Inserimento</button>
                    </div>
                
                    <br>
                    {% csrf_token %}
                    <div class="row">
                      <div class="col-sm-12 col-md-3">
                        {{piattoform.nome.label}}
                      </div>
                      <div class="col-sm-12 col-md-9">
                        {{piattoform.nome}}
                      </div>
                    </div>  
                    <br>
                    <div class="row">
                      <div class="col-sm-12 col-md-3">
                        {{piattoform.idCategoria.label}}
                      </div>
                      <div class="col-sm-12 col-md-9">
                        {{piattoform.idCategoria}}
                      </div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-sm-12 col-md-3">
                        {{piattoform.tempoPreparazione.label}}
                      </div>
                      <div class="col-sm-12 col-md-9">
                        {{piattoform.tempoPreparazione}}
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-sm-12 col-md-3">
                        {{piattoform.tempoCottura.label}}
                      </div>
                      <div class="col-sm-12 col-md-9">
                        {{piattoform.tempoCottura}}
                      </div>
                    </div>
                    <br>
                
                    
                  </div>
                
                </div>
                </form>
            </div>
            {% endif %}
          </div>
          
          <div hx-get="{% url 'tabellaPiatti' %}" hx-trigger="every 1s">
            <div class="loader"></div>
          </div>  
        
    </div>
    <!--Ingredienti Piatti-->
    <div class="tab-pane fade" id="ingredientiPiatti" role="tabpanel">
      <div class="row">
        <div class="col-sm-12 col-md-6 col-lg-4">
          <div id="divNotificaIngredientePiatto"></div>
        </div>
      </div>
      <div class="row">
      {% if permessiAzioni %}
            <div class="col-sm-12 col-md-6 col-lg-4">
              <form hx-post="{% url 'nuovoIngredientePiatto' %}" hx-swap="outerHTML" class="formInserimento" hx-target="#divNotificaIngredientePiatto">
                <div x-data="{ inserimento: false }">
                  <div class="row">
                    <button type="button" class="btn btn-primary buttonAzione" @click="inserimento = true" x-show="!inserimento">Nuovo Ingrediente di un Piatto</button>
                  </div>
                  
                  <div x-show="inserimento">
                    <div class="row">
                      <button type="button" class="btn btn-primary buttonAzione" @click="inserimento = false">Annulla Inserimento</button>
                      <button type="submit" class="btn btn-success buttonAzione" @click="inserimento = false">Conferma Inserimento</button>
                    </div>
                
                    <br>
                    {% csrf_token %}
                    <div class="row">
                      <div class="col-sm-12 col-md-3">
                        {{ingredientepiattoform.idPiatto.label}}
                      </div>
                      <div class="col-sm-12 col-md-9">
                        {{ingredientepiattoform.idPiatto}}
                      </div>
                    </div>  
                    <br>
                    <div class="row">
                      <div class="col-sm-12 col-md-3">
                        {{ingredientepiattoform.idIngrediente.label}}
                      </div>
                      <div class="col-sm-12 col-md-9">
                        {{ingredientepiattoform.idIngrediente}}
                      </div>
                    </div>
                    <br>
                    <div class="row">
                      <div class="col-sm-12 col-md-3">
                        {{ingredientepiattoform.quantita.label}}
                      </div>
                      <div class="col-sm-12 col-md-9">
                        {{ingredientepiattoform.quantita}}
                      </div>
                    </div>
                    <br>
                
                    
                  </div>
                
                </div>
                </form>
            </div>
            {% endif %}
          </div>

          <div hx-get="{% url 'tabellaIngredientiPiatti' %}" hx-trigger="every 1s">
            <div class="loader"></div>
          </div>


    </div>
  </div>




{% endblock %}